## 语法分析器：语法LL(1)

author:zhaowenxun

声明：本文档内容有很多错误之处，参考时注意！！！

### 终结符：

种别码 0-66

### 非终结符：

```
源程序,函数体,数据类型,标识符,形参,字母,数字,语句列表,复合语句,声明语句,赋值语句,条件语句,循环语句,for语句,while语句,跳转语句,表达式,T,F,判断语句,关系运算符,逻辑运算符,自加自减
```

### 文法产生式：

本程序通过#作为结束标志

```c
1,A->B <源程序>→<函数体>//zwx：为了降低难度，暂时不考虑外部声明和程序外声明情况
2,B->CD(E)J <函数体>→<数据类型><标识符>（<形参>）<复合语句>
3,C->kinds <数据类型>→void|char|int|float|double|long
4,D->letter|digit <标识符>→<字符串>|<数字> //zwx：实际意义并非标识符
5,G->,DG|=DG|ε
6,F->+TF|-TF|*TF|\TF|ε
7,E->CDG|ε <形参>→<数据类型> <标识符><G>|ε
8,J->{I} <复合语句>→{ <语句列表>}
9,I->KI|DLI|MI|NI|QI|ε <语句列表>→<声明语句><语句列表>|<赋值语句|单运算符语句><语句列表>|<条件语句><语句列表>|<循环语句><语句列表>|<跳转语句><复合语句>|ε
10,Q->break;|continue;|return R; <跳转语句>→ break;|continue;|return <表达式>;
11,K->CDG;<声明语句>→<数据类型><标识符>;
12,L->=R;|X;<赋值|单运算符语句>→<标识符>=<表达式>;
13,R->TF <表达式>
14,T->letter|digit F→表达式|标识符|数字|字符串
15,M->if(U){I}else{I} <条件语句>→if( <判断语句>)<{语句列表}> else <{语句列表}>//zwx：简化了条件语句
16,U->DVD <判断语句>-><标识符><关系运算符><临时变量>
17,V-> >|<|==|<=|>=|!= <关系运算符>→>|<|==|<=|>=|!=
18,N-> O|P <循环语句>→<for语句>|<while语句>//zwx：不考虑do-while
19,O->for(DL;U;DX){I} <for语句>→for(赋值语句|声明语句;判断语句; <标识符><D>){语句列表}
20,X->++|-- <自加自减>→++|--
21,P->while(U){I} <while语句>→while(判断语句){语句列表}
```

### first集

kinds = int | long | short | float | double | char 

| 标识符 | 非终结符   | FIRST集                                      |
| ------ | ---------- | -------------------------------------------- |
| A      | 源程序     | kinds                                        |
| B      | 函数体     | kinds                                        |
| C      | 数据类型   | kinds                                        |
| D      | 标识符     | letter,digit                                 |
| E      | 形参       | kinds，','                                   |
| G      | G          | ,，=                                         |
| I      | 语句列表   | {,ε,letter,if,for,whilebreak,continue,return |
| J      | 复合语句   | {                                            |
| K      | 声明语句   | kinds                                        |
| L      | 赋值语句   | letter                                       |
| M      | 条件语句   | if                                           |
| N      | 循环语句   | for,while                                    |
| O      | for语句    | for                                          |
| P      | while语句  | while                                        |
| Q      | 跳转语句   | break,continue,return                        |
| R      | 表达式     | letter，digit                                |
| T      | T          | letter，digit                                |
| F      | F          | +,-,*,/                                      |
| U      | 判断语句   | letter                                       |
| V      | 关系运算符 | <,>,!=,>=,<=,==                              |
| X      | 自加自减   | ++,--                                        |



### follow集

| 标识符 | 非终结符        | FOLLOW集                                            |
| ------ | --------------- | --------------------------------------------------- |
| A      | 源程序          | #                                                   |
| B      | 函数体          | #                                                   |
| C      | 数据类型        | letter,digits                                       |
| D      | 标识符          | letter,digits,=,(,<,>,!=,>=,<=,==,\|\|,&&,!,;,++,-- |
| E      | 形参            | ,  ）                                               |
| G      | G               |                                                     |
| H      | 数字//zwx：同上 | kinds,letter,digits,=,(,<,>,!=,>=,<=,==,\|\|,&&,!   |
| I      | 语句列表        | }                                                   |
| J      | 复合语句        | #                                                   |
| K      | 声明语句        | {,ε,letter,if,for,while,break,continue,return,}     |
| L      | 赋值语句        | {,ε,letter,if,for,while,break,continue,return,}     |
| M      | 条件语句        | {,ε,letter,if,for,while,break,continue,return,}     |
| N      | 循环语句        | {,ε,letter,if,for,while,break,continue,return,}     |
| O      | for语句         | {,ε,letter,if,for,while,break,continue,return,}     |
| P      | while语句       | {,ε,letter,if,for,while,break,continue,return,}     |
| Q      | 跳转语句        | {,ε,letter,if,for,while,break,continue,return,}     |
| R      | 表达式          | +,-,*,/                                             |
| T      | T               | +,-,*,/                                             |
| F      | F               | *,/,+,-                                             |
| U      | 判断语句        | )                                                   |
| V      | 关系运算符      | digit,letter                                        |
| X      | 自加自减        | )                                                   |

### 预测分析表

|       | kinds:67  | 0:digit  | 1:letter  | 5:(  | 6:)  | 9:{    | 10:} | 11:,   | 12:; | 47:if              | 54:for             | 53:while       | 56:break  | 55:continue  | 57:return    | 3:<  | 4:>  | 27:<= | 26:>= | 29:!= | 28:\== | 21:\=  | 22:\++ | 23:\-- | 13:+   | 14:-   | 15:*   | 16:/   |
| ----- | --------- | -------- | --------- | ---- | ---- | ------ | ---- | ------ | ---- | ------------------ | ------------------ | -------------- | --------- | ------------ | ------------ | ---- | ---- | ----- | ----- | ----- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| A:100 | A->B      |          |           |      |      |        |      |        |      |                    |                    |                |           |              |              |      |      |       |       |       |        |        |        |        |        |        |        |        |
| B:101 | B->CD(E)J |          |           |      |      |        |      |        |      |                    |                    |                |           |              |              |      |      |       |       |       |        |        |        |        |        |        |        |        |
| C:102 | C->kinds  |          |           |      |      |        |      |        |      |                    |                    |                |           |              |              |      |      |       |       |       |        |        |        |        |        |        |        |        |
| D:103 |           | D->digit | D->letter |      |      |        |      |        |      |                    |                    |                |           |              |              |      |      |       |       |       |        |        |        |        |        |        |        |        |
| E:104 | E->CDG    |          |           |      | G->ε |        |      |        |      |                    |                    |                |           |              |              |      |      |       |       |       |        |        |        |        |        |        |        |        |
| F:105 |           |          |           |      |      |        |      |        | F->ε |                    |                    |                |           |              |              |      |      |       |       |       |        |        |        |        | F->+TF | F->-TF | F->*TF | F->/TF |
| G:106 |           |          |           |      | G->ε |        |      | G->,DG | G->ε |                    |                    |                |           |              |              |      |      |       |       |       |        | \=DG   |        |        |        |        |        |        |
| I:108 | I->KI     |          | I->DLI    |      |      |        | I->ε |        |      | I->MI              | I->NI              | I->NI          | I->QI     | I->QI        | I->QI        |      |      |       |       |       |        |        |        |        |        |        |        |        |
| J:109 |           |          |           |      |      | J->{I} |      |        |      |                    |                    |                |           |              |              |      |      |       |       |       |        |        |        |        |        |        |        |        |
| K:110 | K->CDG;   |          |           |      |      |        |      |        |      |                    |                    |                |           |              |              |      |      |       |       |       |        |        |        |        |        |        |        |        |
| L:111 |           |          |           |      |      |        |      |        |      |                    |                    |                |           |              |              |      |      |       |       |       |        | L->=R; | I->X;  | I->X;  |        |        |        |        |
| M:112 |           |          |           |      |      |        |      |        |      | M->if(U){I}else{I} |                    |                |           |              |              |      |      |       |       |       |        |        |        |        |        |        |        |        |
| N:113 |           |          |           |      |      |        |      |        |      |                    | N->O               | N->P           |           |              |              |      |      |       |       |       |        |        |        |        |        |        |        |        |
| O:114 |           |          |           |      |      |        |      |        |      |                    | O->for(DL U;DX){I} |                |           |              |              |      |      |       |       |       |        |        |        |        |        |        |        |        |
| P:115 |           |          |           |      |      |        |      |        |      |                    |                    | P->while(U){I} |           |              |              |      |      |       |       |       |        |        |        |        |        |        |        |        |
| Q:116 |           |          |           |      |      |        |      |        |      |                    |                    |                | Q->break; | Q->continue; | Q->return R; |      |      |       |       |       |        |        |        |        |        |        |        |        |
| R:117 |           | R->TF    | R->TF     |      |      |        |      |        |      |                    |                    |                |           |              |              |      |      |       |       |       |        |        |        |        |        |        |        |        |
| T:119 |           | T->digit | T->letter |      |      |        |      |        |      |                    |                    |                |           |              |              |      |      |       |       |       |        |        |        |        |        |        |        |        |
| U:120 |           |          | U->DVD    |      |      |        |      |        |      |                    |                    |                |           |              |              |      |      |       |       |       |        |        |        |        |        |        |        |        |
| V:121 |           |          |           |      |      |        |      |        |      |                    |                    |                |           |              |              | V->< | V->> | V-><= | V->>= | V->!= | V->==  |        |        |        |        |        |        |        |
| X:123 |           |          |           |      |      |        |      |        |      |                    |                    |                |           |              |              |      |      |       |       |       |        |        | X->++  | X->--  |        |        |        |        |

### 程序流程图

![img](https://gitee.com/Morphlng/ll1-grammar-analysis-program/raw/master/%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%E6%B5%81%E7%A8%8B%E5%9B%BE.png)

缺点：

1. 表达式中的括号问题没有解决
2. 

